# 操作系统

1. 堆和栈

2. 进程和线程

   - 进程：一个进程就是一个程序的运行实例，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程。当一个进程关闭之后，操作系统会回收进程所占用的内存。进程之间的内容相互隔离（进程间通信使用（IPC）的机制）。
   - 线程：依附于进程，由进程来启动和管理，不能单独存在，进程中使用多线程并行处理能提升运算效率。线程之间共享进程中的数据。进程中的任意一线程执行出错，都会导致整个进程的崩溃。

   - 页面的内存泄露也是单进程变慢的一个重要原因。当内存不能完全回收，导致的问题是，使用时间越长，内存占用越高，浏览器会变得越慢

   - 单进程浏览器：一个进程中管理这多个线程，其中包括网络线程，页面线程等

     - 缺点：
       - **不稳定**，一个插件的意外崩溃会引起整个浏览器的崩溃
       - **渲染引擎模块也是不稳定的**，通常一些复杂的 JS 代码就有可能引起渲染引擎模块的崩溃
       - **不流畅**，在同一个线程中，这意味着同一时刻只能有一个模块可以执行
       - 页面的**内存泄露**也是**单进程变慢**的一个重要原因。通常浏览器的内核都是非常复杂的，运行一个复杂点的页面再关闭页面，会存在内存不能完全回收的情况，这样导致的问题是使用时间越长，内存占用越高，浏览器会变得越慢。
       - **不安全**，通过插件可以获取到操作系统的任意资源

   - 多进程浏览器
     - Chrome 的页面是运行在单独的渲染进程中的，同时页面里的插件也是运行在单独的插件进程之中，而进程之间是通过 IPC 机制进行通信
     - ![image](https://user-gold-cdn.xitu.io/2020/6/17/172c2c84be474219?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)
     - 进程之间相互隔离，所以当一个页面或者插件崩溃时，影响到的仅仅是当前的页面进程或者插件进程，并不会影响到浏览器和其他页面
     - JS也是运行在渲染进程中的，所以即使JS阻塞了渲染进程，影响到的也只是当前的渲染页面，并不会影响到浏览器和其他页面，因为其他页面的脚本时运行在它们自己的渲染进程中的
    

> 参考资料
>
> 1. https://juejin.im/post/6844904193992425479
